<header class="sticky top-0 left-0 w-full z-20 bg-slate-900 p-1">
    <div class="md:mx-auto w-full md:w-11/12 h-full p-1 flex items-center justify-around md:gap-x-4">

        {{# Title & Search #}}
        <div class="w-full h-full flex flex-col md:flex-row items-center md:gap-x-3">
            {{# Title #}}
            <a href="/">
                <img src="/assets/img/icon.png" alt="icon" width="64" height="64" class="w-8 md:w-12" />
            </a>
            {{# /Title #}}

            {{# Search #}}
            <div id="search"></div>
            {{# /Search #}}

            {{# Exploits #}}
            <div class="bg-red">
                <select
                    id="exploit-select"
                    class="hidden md:block bg-slate-800 p-1 text-white text-base hover:cursor-pointer"
                >
                    <option value="">- Recommended Exploits -</option>
                    <option value="/exploit/privacy/tor/anonymize-traffic-with-tor/">Anonymize Traffic with Tor</option>
                    <option value="/exploit/cryptography/">Cryptography</option>
                    <option value="/exploit/linux/privilege-escalation/">Linux PrivEsc</option>
                    <option value="/exploit/network/port-forwarding/port-forwarding-with-chisel/">Port Forwarding with Chisel</option>
                    <option value="/exploit/reconnaissance/">Reconnaissance</option>
                    <option value="/exploit/shell/reverse-shell-cheat-sheet/">Reverse Shell Cheat Sheet</option>
                    <option value="/exploit/web/method/web-content-discovery/">Web Content Discovery</option>
                    <option value="/exploit/windows/privilege-escalation/">Windows PrivEsc</option>
                </select>
            </div>
            {{# /Exploits #}}
        </div>
        {{# /Title & Search #}}

        {{# Socials #}}
        <div class="hidden md:flex w-full h-full items-center justify-end gap-x-4">
            <a href="/support/">
                Support
            </a>
            <a
                href="{{ site.security_links.url }}"
                target="_blank"
                rel="noopener noreferrer"
                alt="{{ site.security_links.name }}"
            >
                Security Links
            </a>
            <div id="tools" class="relative">
                <span
                    id="tools-text"
                    class="text-slate-300 cursor-pointer"
                >
                    Tools
                </span>

                {{# Drop-down #}}
                <div
                    id="tools-dropdown"
                    class="
                        hidden absolute top-8 right-1/2 translate-x-1/2 bg-slate-800
                        p-2 flex flex-col text-nowrap
                    "
                >
                    <a
                        href="{{ site.hermit.url }}"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        {{ site.hermit.name }}
                    </a>
                    <a
                        href="{{ site.ihunt.url }}"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        {{ site.ihunt.name }}
                    </a>
                    <a
                        href="{{ site.lolgen.url }}"
                        target="_blank"
                        rel="noopener noreferrer"
                    >
                        {{ site.lolgen.name }}
                    </a>
                </div>
            </div>
            <a
                href="{{ site.github.url }}"
                target="_blank"
                rel="noopener noreferrer"
                alt="{{ site.github.name }}"
            >
                GitHub
            </a>
            <a
                href="{{ site.twitter.url }}"
                target="_blank"
                rel="noopener noreferrer"
                alt="{{ site.twitter.name }}"
            >
                Twitter
            </a>
        </div>
        {{# /Socials #}}

    </div>
</header>

{{# Hamburger #}}
<div class="hamburger fixed top-3 right-3 z-40 block md:hidden cursor-pointer">
    <div class="lines">
        <span class="line bg-white"></span>
        <span class="line bg-white"></span>
        <span class="line bg-white"></span>
    </div>
    <div class="line-cross hidden md:hidden text-[22px] text-white leading-none"></div>
</div>

<div
    id="search_bg"
    class="fixed top-0 left-0 w-screen z-10 h-screen hidden bg-black opacity-50"
>
</div>

<style>
.hamburger .lines span.line {
    display: block;
    width: 20px;
    height: 3px;
    margin-bottom: 5px;
}

.hamburger .line-cross:before {
    content: '\2716';
}
</style>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        //Display the black filter when searching
        const searchBgElem = document.getElementById("search_bg");
        const drawerElem = document.querySelector(".pagefind-ui__drawer");
        const inputElem = document.querySelector(".pagefind-ui__search-input");
        const optionElem = document.querySelector("#exploit-select");
        const toolsTextElem = document.querySelector("#tools-text");
        const toolsDropDownElem = document.querySelector("#tools-dropdown");

        if (searchBgElem) {
            searchBgElem.addEventListener('click', () => {
                searchBgElem.classList.add("hidden");
                drawerElem.style.visibility = "hidden";
                drawerElem.style.opacity = 0;
                toolsDropDownElem.classList.add("hidden");
            });
        }
        inputElem.addEventListener('focus', () => {
            if (searchBgElem) {
                searchBgElem.classList.remove("hidden");
                drawerElem.style.visibility = "visible";
                drawerElem.style.opacity = 1;
            }
        });

        // Exploit selector
        if (optionElem) {
            optionElem.addEventListener('change', () => {
                let selectedValue = optionElem.value;
                window.location.href = selectedValue;
            });
        }

        // Tools drop-down
        if (toolsTextElem && toolsDropDownElem) {
            toolsTextElem.addEventListener('click', () => {
                searchBgElem.classList.remove("hidden");
                toolsDropDownElem.classList.remove("hidden");
            });
        }
    });
</script>